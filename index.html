<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>Highmaps Examples</title>
 
		<link rel="stylesheet" href="countries.css" type="text/css">
    
    		<script src="svg-pan-zoom.js"></script>
    		<!--<script src="zoom.js"></script>-->


<style>

#container{
    background: #c7d7f7;
    width: 80%;
    /*overflow: auto;*/
    margin: auto;
}
::-webkit-scrollbar { 
    display: none; 
}
@media only screen and (max-width: 600px) {
    #container {
        width: 100%;
    }
}
body{
    padding: 0 !important;
}

path{
   fill: #a0b0e0;	
    stroke: #c0d2f0; 
    stroke-width: 6; 
    fill-opacity: 1;
}
path:hover{
    fill: #f0f;	
    stroke-width: 12; 
    stroke: rgb(255, 255, 255); 
}
#mx-tooltip {
    display: none;
    background: #C8C8f8;
    padding: 10px;
    position: absolute;
    z-index: 1000;
}
svg:hover + #mx-tooltip{
    display: block;
}
#outlines{
    transition: transform-origin 1.5s, transform 1.5s;
}
#map{
    width: 100% !important;
    height: auto;
}
.zoom{
    position: absolute;
    width: 25px;
}
</style>
<script src="countries.js"></script>
<script>
var mxCountries = [];
</script>

	</head>
	<body>

        <div id="ask"></div>
        <div id="iscorrect" ></div>
        
	<div id="container"></div>

        <button class="zoom" style="top:70px;left:90px"   onclick="minuxMap.zoomR();"> R </button>
        <button class="zoom" style="top:40px;left:65px;"  onclick="minuxMap.zoomT();"> T </button>
        <button class="zoom" style="top:70px;left:40px;"  onclick="minuxMap.zoomL();"> L </button>
        <button class="zoom" style="top:100px;left:65px;" onclick="minuxMap.zoomB();"> B </button>
        <button class="zoom" style="top:150px;left:65px;" onclick="minuxMap.zoomPro();"> + </button>
        <button class="zoom" style="top:190px;left:65px;" onclick="minuxMap.zoomMin();"> - </button>

<script src="svgEuropa.js"></script>

<script>


window.mobilecheck = function() {
  var check = false;
  (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);
  return check;
};

var minuxMap = {

    init : function(){
	//this.setSvgPanZoom();

	for(var c=0; c<minux_countries_codes.length; c++){
            var country = minux_countries_codes[c];
            var countryCode = country.cca2;
            minuxMap.allCountriesCodes[countryCode.toLowerCase()] = country;        
	}

        for(var c=0; c< this.countriesByClassName.length; c++){
	    this.countriesIdsArray.push( this.countriesByClassName[c].id )
            this.countriesByClassName[c].addEventListener("touchstart", this.clickEvent);
	    //this.countriesByClassName[c].addEventListener("mousemove", hoverArea);
            this.countriesByClassName[c].addEventListener("click", this.clickEvent);
	}
	
	this.setRandomCountryId();

    },
    setSvgPanZoom : function(){
	// Expose to window namespase for testing purposes
        var zoom = svgPanZoom('#map', {
             zoomEnabled: true,
             controlIconsEnabled: true,
             fit: true,
             center: true,
             // viewportSelector: document.getElementById('demo-tiger').querySelector('#g4')
	     // this option will make library to misbehave. Viewport should have no transform attribute
        });
    },
    allCountriesCodes : [],
    clickEvent : function(e){
        var countryTargetClick = e.target;
	if( minuxMap.idCountryGuess == countryTargetClick.id ){
	    countryTargetClick.style.fill='yellow';
	    //areaClick.mouseEnabled = false;
	    minuxMap.correctsAnswerNum++;
            //areaClick.baseSettings.selectedColor = areaClick.color;
	    minuxMap.correct();
	}else{
            minuxMap.inCorrect();
	    /*var area = map.getObjectById(game.countryCodeAsk);
	    countryTargetClick.style.fill='yellow';
	    area.colorReal = area.color;
            area.baseSettings.selectedColor = area.color;
	    //area.mouseEnabled = false;
            event.chart.selectObject();//Deselecciona pero reajusta el zoom del mapa
            //areaClick.baseSettings.selectedColor = colorsGame.areaHover;
	    //areaClick.validate();
	    map.zoomToGroup( [ area ] );
	    area.validate();
	    game.inCorrect();*/
	}
    },
    idCountryGuess : "",
    countriesByClassName : document.getElementsByClassName("europe"),
    countriesIdsArray : [],
    setQuestion: function(){
        var countryName = minuxMap.allCountriesCodes[ minuxMap.idCountryGuess ].translations.spa.common;
	console.log(countryName);
        document.getElementById('ask').innerHTML = '¿Dónde se encuentra '+ countryName +'?';
    },
    setRandomCountryId : function(){
        var numCountries = minuxMap.countriesIdsArray.length;
    	if( numCountries >= 0 ){
    	    var randomIdNum = Math.floor(Math.random() * numCountries); 
    	    this.idCountryGuess = this.countriesIdsArray[randomIdNum];
            this.countriesIdsArray.splice(randomIdNum, 1);
    	    this.setQuestion();
    	}else{
    	    /*document.getElementById('ask').innerHTML = "Correctos " + game.numberCorrects +" de "+ game.numberAreas +" paises";
    	    map.clickMapObject = function(){;}
    	    map.balloon.enabled = true;*/
    	}	    
    },
    timer: "",
    setTimer: function(){
	clearTimeout(this.timer);
        this.timer = setTimeout(function(){
            document.getElementById("iscorrect").className = "hidealert";
            //map.goHome();
        }, 1500);   
    },
    correct: function(){
	var checkElement = document.getElementById("iscorrect");
	checkElement.innerHTML = "<span style='margin: auto;vertical-align: -30px;color: #fff; font-size: 28px;'>  &#x2713; Correcto </span>";
        checkElement.style.background = "#3630d4";
	checkElement.className = "showalert";
	this.setRandomCountryId();
	this.setTimer();
    },
    inCorrect: function(){
        var checkElement = document.getElementById("iscorrect");
	checkElement.innerHTML = "<span style='margin: auto;vertical-align: -30px;color: #fff; font-size: 28px;'> &#x2717 Incorrecto </span>";
        checkElement.style.background = "#d66";
	checkElement.className = "showalert";
	this.setRandomCountryId();
	this.setTimer();
    },
    correctsAnswerNum : 0,
    scaleNum : 1,
    zoomPro: function(){
        minuxMap.scaleNum = minuxMap.scaleNum + 0.1;
        //document.getElementById("outlines").style.transformOrigin = 12000+"px "+ 6000 +"px"
        document.getElementById("outlines").style.transform = "scale("+ minuxMap.scaleNum +")";   
    },
    zoomMin: function(){
        minuxMap.scaleNum = minuxMap.scaleNum - 0.1;
        //document.getElementById("outlines").style.transformOrigin = 12000+"px "+ 6000 +"px"
        document.getElementById("outlines").style.transform = "scale("+ minuxMap.scaleNum +")";  
    },
    leftt: 200,
    topp: 200,
    zoomR: function(){
        minuxMap.leftt = minuxMap.leftt +3000;
        document.getElementById("outlines").style.transformOrigin = minuxMap.leftt+"px "+ minuxMap.topp +"px"
    },
    zoomL: function(){
        minuxMap.leftt = minuxMap.leftt - 3000;
        document.getElementById("outlines").style.transformOrigin = minuxMap.leftt+"px "+ minuxMap.topp +"px"
    },
    zoomT: function(){
        minuxMap.topp = minuxMap.topp - 3000;
        document.getElementById("outlines").style.transformOrigin = minuxMap.leftt+"px "+ minuxMap.topp +"px"
    },
    zoomB: function(){
        minuxMap.topp = minuxMap.topp + 3000;
        document.getElementById("outlines").style.transformOrigin = minuxMap.leftt+"px "+ minuxMap.topp +"px"
    }
}
minuxMap.init();



/*
var countries=document.getElementsByClassName("europe");
function hoverArea(e){
    var tooltip = document.getElementById('mx-tooltip');
    var codeCountry = e.toElement.id;
    //console.log(codeCountry);
    tooltip.innerHTML = mxCountries[ codeCountry ].translations.spa.common;

    var x = e.pageX - ( tooltip.offsetWidth/2 ); // e.pageX clientX 
    var y = e.pageY - ( tooltip.offsetHeight ) - 15;  

    tooltip.style.top = y + 'px';
    tooltip.style.left = x +'px'; 
}
for(c = 0; c< countries.length; c++){
    //countries[c].addEventListener("mousemove", hoverArea);
    //countries[c].addEventListener("click", function(e){console.log(e.target.id)});
}
*/


//var mapHeight = document.getElementById('outlines').getBoundingClientRect().height;
//document.getElementById('map').setAttribute("height", mapHeight+"px");




</script>

	</body>
</html>
